<odoo>
    <data>

        <record id="report_expense_invoice_paperformat" model="report.paperformat">
            <field name="name">Expense Invoices</field>
            <field name="default" eval="True"/>
            <field name="format">custom</field>
            <field name="page_height">297</field>
            <field name="page_width">210</field>
            <field name="orientation">Landscape</field>
            <field name="margin_top">30</field>
            <field name="margin_bottom">23</field>
            <field name="margin_left">5</field>
            <field name="margin_right">5</field>
            <field name="header_line" eval="False"/>
            <field name="header_spacing">20</field>
            <field name="dpi">90</field>
        </record>

        <report
                id="account_expense_invoices"
                model="account.move"
                string="Expense Invoices"
                report_type="qweb-pdf"
                name="qshield_crm.report_qshield_expense_invoice"
                file="qshield_crm.report_qshield_expense_invoice"
                print_report_name="(object._get_report_base_filename())"
                paperformat="qshield_crm.report_expense_invoice_paperformat"
        />
        <template id="report_qshield_expense_invoice">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="web.basic_layout">
                        <div class="page">
                            <html>
                                <link href="https://fonts.googleapis.com/css2?family=Prata&amp;display=swap"
                                      rel="stylesheet"/>
                                <link href="https://fonts.googleapis.com/css2?family=Bentham&amp;family=Prata&amp;display=swap"
                                      rel="stylesheet"/>
                                <link href="https://fonts.googleapis.com/css2?family=Sora:wght@145&amp;display=swap"
                                      rel="stylesheet"/>
                                <style type="text/css">
                                    body{
                                    text-align:justify;
                                    font-size:12px;
                                    }
                                </style>
                                <body>
                                    <div class="float-left col-4">
                                        <!--                                        <img class="pos-receipt-logo" width="400" height="200"-->
                                        <!--                                             t-attf-src="data:image/*;base64, #{o.company_id.sudo().logo}" alt="Logo"/>-->
                                        <!--                                     t-attf-src='../../web/image/res.company/{{o.company_id.id}}/logo'-->
                                        <img src="/qshield_crm/static/src/img/img_logo.png"
                                             style="margin-bottom:20px;height:100px;width: 220px;"/>
                                    </div>
                                    <div class="row mt32 mb32">
                                        <div class="col-3">

                                            <span>
                                                <t t-esc="o.company_id.name"/>
                                            </span>
                                            <br/>

                                            <span><t t-esc="o.company_id.state_id.name"/>,
                                                <t t-esc="o.company_id.country_id.name"/>
                                            </span>
                                            <br/>

                                        </div>
                                        <div class="col-3">
                                            <span>
                                                <i class="fas fa-map-marker-alt"></i>
                                                <t t-esc="o.company_id.partner_id.name"/>
                                                <br/>
                                                <t t-esc="o.company_id.street"/>
                                                <br/>
                                                <t t-esc="o.company_id.street2"/>
                                            </span>

                                            <span><t t-esc="o.company_id.state_id.name"/>,
                                                <t t-esc="o.company_id.country_id.name"/>
                                            </span>
                                            <br/>
                                            <span>
                                                <i class="fal fa-phone-square-alt"></i>
                                                <t t-esc="o.company_id.phone"/>
                                            </span>
                                            <br/>
                                            <span>
                                                <i class="far fa-envelope"></i>
                                                <t t-esc="o.company_id.email"/>
                                            </span>
                                            <br/>

                                        </div>
                                        <div class="col-3">
                                            <span>
                                                <t t-esc="o.invoice_date"/>
                                            </span>
                                            <br/>
                                            <span>
                                                <t t-esc="o.name"/>
                                            </span>
                                            <br/>
                                            <span>
                                                <t t-esc="o.ref"/>
                                            </span>
                                        </div>
                                    </div>

                                    <table class="table table-sm">
                                        <span>
                                            <b>
                                                <t t-esc="o.name"/>
                                            </b>
                                        </span>
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Contact</th>
                                                <th>Contract(Company)</th>
                                                <th>Service Name</th>
                                                <th>Case Id</th>
                                                <th>Status</th>
                                                <th>Government Fee</th>
                                                <th>Service Fee</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-set="i" t-value="1"/>
                                            <tr t-foreach="o.invoice_line_ids" t-as="line">
                                                <t t-if="line.service_request_id">
                                                    <td>
                                                        <span t-esc="i"/>
                                                        <t t-set="i" t-value="i+1"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="line.service_request_id.partner_id.name"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="line.related_company_id.name"/>
                                                    </td>

                                                    <td>
                                                        <span t-esc="line.service_request_id.service_type_id.name"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="line.service_request_id.name"/>
                                                    </td>
                                                    <td>
                                                        <span t-esc="line.service_request_id.status"/>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="sum(line.service_request_id.expenses_ids.mapped('amount'))"
                                                              t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>

                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="line.price_subtotal"
                                                              t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>

                                                    </td>
                                                </t>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div class="row justify-content-end">
                                        <div class="col-4">
                                            <table class="table table-sm">
                                                <tr class="border-black">
                                                    <td class="text-left">
                                                        <strong>Sub Total in [OAR,USD]</strong>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="sum(o.invoice_line_ids.service_request_id.expenses_ids.mapped('amount'))"
                                                              t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                                    </td>
                                                     <td class="text-right">
                                                        <span t-esc="sum(o.invoice_line_ids.service_request_id.expenses_ids.mapped('amount'))"
                                                              t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                                    </td>
                                                </tr>
                                                <tr class="border-black">
                                                    <td class="text-left">
                                                        <strong>End Total</strong>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="sum(o.invoice_line_ids.service_request_id.expenses_ids.mapped('amount'))"
                                                              t-esc-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                                    </td>

                                                </tr>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="row mt32 mb32">
                                        <div class="col-3">
                                            <span t-esc="o.invoice_partner_bank_id.currency_id.name"/>
                                            <br/>

                                            <span t-esc="o.invoice_partner_bank_id.bank_id.name"/>

                                            <br/>

                                            <span>
                                                <i class="fas fa-map-marker-alt"></i>
                                                <t t-esc="o.company_id.partner_id.name"/>
                                                <br/>
                                                <t t-esc="o.company_id.street"/>
                                                <t t-esc="o.company_id.street2"/>
                                            </span>
                                            <span><t t-esc="o.company_id.state_id.name"/>,
                                                <t t-esc="o.company_id.country_id.name"/>
                                            </span>

                                            <br/>
                                            <span t-esc="o.invoice_partner_bank_id.acc_number"/>
                                            <br/>

                                            <span t-esc="o.invoice_partner_bank_id.bank_id.bic"/>
                                            <br/>
                                            <span t-esc="o.invoice_partner_bank_id.bank_id.bic"/>
                                        </div>
                                    </div>

                                </body>
                            </html>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>